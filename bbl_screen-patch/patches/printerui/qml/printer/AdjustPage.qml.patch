--- printer_ui-orig/printerui/qml/printer/AdjustPage.qml
+++ printer_ui/printerui/qml/printer/AdjustPage.qml
@@ -1,17 +1,22 @@
 import QtQuick 2.12
 import QtQuick.Shapes 1.12
-
+import QtQuick.Controls 2.12
+import QtQuick.Layouts 1.12
 import UIBase 1.0
 import Printer 1.0
 
 import ".."
 import "qrc:/uibase/qml/widgets"
+import "../X1Plus.js" as X1Plus
 
 Item {
-
     property var heaters: PrintManager.heaters
     property var axisController: PrintManager.axisController
-
+    property var speedValues: [50,100,125,175]
+    property var speedStr: ["Silent","Normal","Sport","Ludicrous"]
+    property var targetSpeed:100
+    property var isHomed:  X1Plus.Bindings.printerStatus.homeState(PrintManager)
+    
     property var speedAdjust: QtObject {
         property string name: "speed"
         property int currentTemp: PrintManager.currentTask.printSpeed
@@ -20,7 +25,7 @@
         property string errorMsg
         property bool visible: true
     }
-
+    
     property var tempModel: [
         heaters.hotend,
         heaters.heatbed,
@@ -55,7 +60,10 @@
         AxisItem { name: "10"; tip: "plate_down"
             axis: AxisController.AxisZ; dir: AxisController.Increase; unit: AxisController.MM_10}
     }
-
+    Component.onCompleted: {
+        X1Plus.Bindings.printerStatus.updatePrintSpeed();
+        targetSpeed = X1Plus.Bindings.printSpeed()
+    }
     MarginPanel {
         id: ctrlPanel
         width: 295
@@ -163,7 +171,6 @@
                 }
             }
         }
-
         Item {
             id: zAxis
             x: 553
@@ -368,13 +375,7 @@
         onReleased: {
             if(speedPad.target) {
                 speedPad.target = null
-                // here only when close "speedPad" then upload once the event track msg of "speedMode"
-                EventTrack.itemName = "speedAdjust"
-                EventTrack.extraInfo = {
-                    "control": "Choise",
-                    "currentIndex": speedPad.speedMode,
-                    "currentItemText": PrintManager.currentTask.printSpeedModeStrings[speedPad.speedMode]
-                }
+                targetSpeed = X1Plus.Bindings.printSpeed()
                 speedPad_close();
             }
             fanPad.target = null
@@ -384,63 +385,282 @@
 
     Rectangle {
         id: speedPad
-        anchors.fill: axisPanel
-        color: "#B20D0F0D"
+        width: 540
+        height: 591
+        color:"#B20D0F0D"
         visible: target != null
-
+        anchors.fill: axisPanel
         property var target: null
-        //property var speeds: [180, 140, 100, 60]
-        //property int speed: speeds[speedMode]
-        property string step: stepBar.steps[speedMode]
-        property alias speedMode: stepBar.step
-
-        onTargetChanged: {
-            if (target != null)
-                speedMode = PrintManager.currentTask.printSpeedMode
-        }
+        property alias speed: dial.value
+        property bool ramping: false
 
-        onSpeedModeChanged: {
-            if (target != null) {
-                PrintManager.currentTask.printSpeedMode = speedMode
+        
+        function closestLevel(value) {
+            var closestIndex = 0; 
+            var minDiff = Math.abs(value - speedValues[0]);
+
+            for (var i = 1; i < speedValues.length; i++) {
+                var diff = Math.abs(value - speedValues[i]);
+                if (diff < minDiff) {
+                    minDiff = diff;
+                    closestIndex = i;
+                }
             }
+            return speedStr[closestIndex];
         }
 
+        onSpeedChanged:{
+            if (target!=null){
+                targetSpeed = speed;
+            }
+        }
+        onTargetChanged:{
+            if (target!=null){
+                speed = targetSpeed;
+                X1Plus.Bindings.printerStatus.updatePrintSpeed();
+                canvas2.requestPaint();
+            } 
+        }
         Rectangle {
             width: 540
             height: 591
             anchors.centerIn: parent
             radius: 15
             color: Colors.gray_600
-
             MouseArea {
                 anchors.fill: parent
                 onPressed: mouse.accepted = true
             }
+            Text {
+                id: title
+                text:qsTr("Print Speed")
+                font.pixelSize: 36
+                color: "white"
+                anchors.horizontalCenter: parent.horizontalCenter
+                anchors.top: parent.top
+                anchors.topMargin: 20
+            }
+           
+            Dial {
+                id: dial
+                width: 190*1.4
+                height: 190*1.4
+                from: 30
+                to:180
+                value: X1Plus.Bindings.printSpeed()
+                anchors.centerIn: parent
+                stepSize:2
+                Component.onCompleted: {
+                    //speedPad.updateDial();
+                }
+                onValueChanged: {
+                    dial.value = Math.round(dial.value / dial.stepSize) * dial.stepSize;
+                    targetSpeed = dial.value;
+                }
+                
+                background: Rectangle {
+                    id: background2
+                    implicitWidth: 190*1.4
+                    implicitHeight: 190*1.4
+                    width:implicitWidth
+                    height:implicitHeight
+                    color: "#2F302F"
+                    radius: implicitWidth/2
+                    anchors.fill: parent
+                    
+                    
+                    Canvas {
+                        id: canvas2
+                        anchors.fill: parent
+                        onPaint: {
+                            //Draw the tickmarks for the Dial type, with text labels
+                            var ctx = getContext("2d");
+                            var centerX = width / 2;
+                            var centerY = height / 2;
+                            var radius = Math.min(centerX, centerY) - 5; //tick positioning
+                            ctx.clearRect(0, 0, width, height);
+
+                            var startAngle = 130;
+                            var endAngle =270;
+                            var range = dial.to - dial.from;
+                            var stepAngle = (startAngle - endAngle) / range * dial.stepSize;
+                
+                            for (var i = 0; i <= range; i += dial.stepSize) {
+                                var angle = (startAngle - i * stepAngle) * Math.PI / 180;
+                                var outerX = centerX + radius * Math.cos(angle);
+                                var outerY = centerY + radius * Math.sin(angle);
+                                var innerX = centerX + (radius - 20) * Math.cos(angle); //adjust tick length
+                                var innerY = centerY + (radius - 20) * Math.sin(angle);
+
+                                ctx.beginPath();
+                                ctx.moveTo(outerX, outerY);
+                                ctx.lineTo(innerX, innerY);
+                                if (dial.from + i === Math.round(X1Plus.Bindings.printSpeed())){
+                                    ctx.strokeStyle = "#00ff00";
+                                } else if (dial.from + i === Math.round(targetSpeed) && speedPad.ramping){
+                                    ctx.strokeStyle = "#FF0000";
+                                } else {
+                                    ctx.strokeStyle = "#6B6B6A";
+                                }
+                                ctx.lineWidth = 2;
+                                ctx.stroke();
+
+                                if (i % 10 === 0) {// number of labels
+                                    var labelRadius = radius -30; //label position
+                                    var labelX = centerX + labelRadius * Math.cos(angle) - 10; 
+                                    var labelY = centerY + labelRadius * Math.sin(angle) + 5;
+                                    
+                                    ctx.fillStyle = "#6B6B6A"; //label color
+                                    ctx.fillText(dial.from + i, labelX, labelY);
+                                }
+                            }
+                        }
+                    }
+                }
 
+                handle: Rectangle {
+                    id: hand //dial handle
+                    width: 40
+                    height: 40
+                    radius: 20
+                    color: dial.pressed ?"#4E4F4E": "#3A3B3A" 
+                    border.color: "#eb6600"
+                    border.width: 2
+                    x: background2.x + background2.width / 2 - hand.width / 2
+                    y: background2.y + background2.height / 2 - hand.height / 2
+                     transform: [
+                        Translate {
+                            y: -Math.min(background2.width, background2.height) * 0.5 + hand.height / 2
+                        },
+                        Rotation {
+                            angle: dial.angle
+                            origin.x: hand.width / 2
+                            origin.y: hand.height / 2
+                        }
+                    ]
+                }
+                
+                Text {
+                    text: qsTr("Speed: %1\n\nAcc Mag: %2\nFeed rate: %3\nR: %4").arg(dial.value)
+                        .arg(X1Plus.GcodeGenerator.speed_interp.acceleration_magnitude( X1Plus.GcodeGenerator.speed_interp.speed_fraction(dial.value)).toFixed(2))
+                        .arg(X1Plus.GcodeGenerator.speed_interp.feed_rate(dial.value).toFixed(2))
+                        .arg(X1Plus.GcodeGenerator.speed_interp.speed_fraction(dial.value).toFixed(1))
+                        
+                    color: "white"
+                    font.pixelSize: 14
+                    anchors.centerIn: dial
+                  
+                }
+            }
+          
             Text {
-                x: 50
-                y: 18
-                font: Fonts.body_30
-                color: Colors.gray_300
-                text: qsTr("Printing speed")
+                id: currentSpeedLabel
+                text: qsTr("Current Speed\n%1%").arg(X1Plus.Bindings.printSpeed().toFixed(1))
+                color: "white"
+                font.pixelSize: 18
+                anchors.right: parent.right
+                anchors.rightMargin: 20
+                anchors.top: parent.top
+                anchors.topMargin:591/2-70
             }
+            
+            Text {
+                id: targetSpeedLabel
+                text: qsTr("Target Speed\n%1%").arg(targetSpeed.toFixed(1).toString())
+                color: "white"
+                font.pixelSize: 18
+                anchors.top: currentSpeedLabel.bottom
+                anchors.right: currentSpeedLabel.right
+                anchors.topMargin: 20
+            }
+           
+            Text {
+                id: closestLbl
+                text: qsTr("'%1' mode").arg(speedPad.closestLevel(dial.value))
+                color: Colors.brand
+                font.pixelSize: 24
+                anchors.bottom: dial.top
+                anchors.horizontalCenter: parent.horizontalCenter
+                anchors.bottomMargin: 30
+                horizontalAlignment: Text.AlignHCenter
+            }
+   
+            Item {
+                id: buttonsContainer
+                width: parent.width
+                height: 170
+                anchors.horizontalCenter: parent.horizontalCenter
+                anchors.top: dial.bottom
+                anchors.topMargin: 30
+              
+                Row {
+                    spacing: 15 
+                    anchors.horizontalCenter: parent.horizontalCenter      
+                    visible:true       
+                    Rectangle {
+                        id: rampButton
+                        width: 145+70
+                        height: 125
+                        color: (speedPad.ramping) ? "#2F302F": Colors.gray_600
+                        radius: 25
+                
+                        Text {
+                            text: (speedPad.ramping) ? qsTr("Ramp: ON") : qsTr("Ramp: OFF")
+                            anchors.centerIn: parent
+                            color: "white"
+                            font.pixelSize: 30 
+                        }
+                        
+                        MouseArea {
+                            anchors.fill: parent
+                            onClicked: {
+                                let range = Math.abs(X1Plus.Bindings.printSpeed()-targetSpeed);
+                                speedPad.ramping = !(speedPad.ramping);
+                                canvas2.requestPaint();
+                                /* 
+                                    1. need a way to input layers, ie 'Ramp over x layers'
+                                    2. Determine a step size that will ensure all ramp levels are even integers (printer does not report odd numbered speed values)
+                                            (range % steps) == 0
+                                    3. Set a property binding to tell the printer where to start ramping
+                                    4. Use X1Plus.GcodeGenerator.GcodeLibrary.macros.rampSpeedLevel(start_speed,end_speed,steps)
+                                    5. Use onLayerNumChanged{} to send gcode if the layer number coincides with the step size
+                                */
+                            }
+                           
+                            onEntered: parent.opacity = 0.8
+                            onExited: parent.opacity = 1.0
+                        }
+                    }
+                    Rectangle {
+                        width: 1
+                        height: 105*.85
+                        anchors.verticalCenter: parent.verticalCenter
+                    }
+                    Rectangle {
+                        id: applyButton
+                        width: 145+70
+                        height: 125
+                        color: Colors.gray_600
+                        radius: 25
+
+                        Text {
+                            text: qsTr("Apply")
+                            anchors.centerIn: parent
+                            color: "white"
+                            font.pixelSize: 30
+                        
+                        }
 
-            ZStepBar {
-                id: stepBar
-                width: parent.width - 260
-                x: 160
-                y: 120
-                stepOffset: 127
-                titleOffset: 60
-                barColor: Colors.gray_800
-                thumbIcon: "../../icon/thumb.svg"
-                tipColor: Colors.gray_400
-                titleColor: StateColor {
-                    StateColorItem { color: "brand"; states: StateColor.Checked }
-                    StateColorItem { color: "gray_200"; states: StateColor.Normal }
+                        MouseArea {
+                            anchors.fill: parent
+                            onClicked: {
+                                X1Plus.Bindings.printerStatus.setPrintSpeedGcode(speedPad.speed);
+                                PrintManager.currentTask.printSpeed.targetTemp = targetSpeed;
+                                speedPad.target = null;
+                            }
+                        }
+                    }
                 }
-                titleFont: Fonts.body_36
-                steps: PrintManager.currentTask.printSpeedModeStrings
             }
         }
     }
@@ -498,7 +718,7 @@
             EventTrack.itemName: "tempAndSpeed_" + modelData.name
 
             Binding on text {
-               value: speedPad.step
+               value: targetSpeed +"%"
                when: speedPad.target == modelData
             }
 
@@ -800,7 +1020,7 @@
                 EventTrack.itemName: "bigSector_" + modelData.name
 
                 onClicked: {
-                    if ((PrintManager.homedState & PrintManager.AXIS_HOMED_ALL) != PrintManager.AXIS_HOMED_ALL) {
+                    if ((PrintManager.homedState & PrintManager.AXIS_HOMED_ALL) !== PrintManager.AXIS_HOMED_ALL) {
                         limitFrame()
                     }
                     axisController.moveAxis(modelData.axis, modelData.dir, AxisController.MM_10)
@@ -818,7 +1038,7 @@
                 EventTrack.itemName: "smallSector_" + modelData.name
 
                 onClicked: {
-                    if ((PrintManager.homedState & PrintManager.AXIS_HOMED_ALL) != PrintManager.AXIS_HOMED_ALL) {
+                    if ((PrintManager.homedState & PrintManager.AXIS_HOMED_ALL) !== PrintManager.AXIS_HOMED_ALL) {
                         limitFrame()
                     }
                     axisController.moveAxis(modelData.axis, modelData.dir, AxisController.MM)
